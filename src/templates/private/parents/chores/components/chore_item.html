<div class="chore-item" data-chore-tags="{{ chore.tags or '' }}" 
    style="display: flex; flex-direction: column; height: 100%; position: relative;">
    
    <!-- Header with name and status -->
    <div style="display: flex; align-items: flex-start; justify-content: space-between; gap: var(--space-sm); margin-bottom: var(--space-sm);">
        <h3 style="margin: 0; font-size: 1.125rem; font-weight: 700; word-break: break-word; flex: 1; line-height: 1.3;">
            {{ chore.name }}
        </h3>
        <form method="POST" action="{{ url_for('parent.toggle_chore', chore_id=chore.id) }}" style="flex-shrink: 0;">
            <button type="submit"
                class="status-badge {% if not chore.is_active %}inactive{% else %}active{% endif %}"
                style="cursor: pointer; border: none; font: inherit; white-space: nowrap;"
                title="Click to {% if chore.is_active %}hide{% else %}show{% endif %}">
                {% if not chore.is_active %}ğŸ‘ï¸ Hidden{% else %}âœ“ Active{% endif %}
            </button>
        </form>
    </div>

    <!-- Tags -->
    {% if chore.tags %}
    <div style="display: flex; gap: 0.375rem; flex-wrap: wrap; margin-bottom: var(--space-sm);">
        {% for tag in chore.tags.split(',') %}
        <span class="tag-badge"
            style="background: var(--accent-primary); color: white; padding: 0.1875rem 0.5rem; font-size: 0.6875rem; font-weight: 700; text-transform: uppercase; border: 0.125rem solid var(--accent-dark); box-shadow: 0.125rem 0.125rem 0 var(--accent-dark); white-space: nowrap;">
            #{{ tag.strip() }}
        </span>
        {% endfor %}
    </div>
    {% endif %}

    <!-- Description -->
    {% if chore.description %}
    <div style="color: var(--text-secondary); font-size: 0.875rem; line-height: 1.5; word-break: break-word; margin-bottom: var(--space-md); flex-grow: 1;">
        {{ chore.description }}
    </div>
    {% else %}
    <div style="flex-grow: 1;"></div>
    {% endif %}

    <!-- Rewards and Frequency Grid -->
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-xs); margin-bottom: var(--space-md);">
        <div style="display: flex; align-items: center; gap: 0.375rem;">
            <span style="font-size: 1.25rem;">ğŸ’°</span>
            <div style="display: flex; flex-direction: column;">
                <span style="font-size: 0.6875rem; color: var(--text-secondary); text-transform: uppercase; font-weight: 700; letter-spacing: 0.03em;">Coins</span>
                <span style="font-size: 1rem; font-weight: 700; color: var(--accent-primary);">{{ chore.coin_value }}</span>
            </div>
        </div>
        <div style="display: flex; align-items: center; gap: 0.375rem;">
            <span style="font-size: 1.25rem;">â­</span>
            <div style="display: flex; flex-direction: column;">
                <span style="font-size: 0.6875rem; color: var(--text-secondary); text-transform: uppercase; font-weight: 700; letter-spacing: 0.03em;">Points</span>
                <span style="font-size: 1rem; font-weight: 700; color: var(--accent-primary);">{{ chore.point_value }}</span>
            </div>
        </div>
    </div>

    <!-- Frequency Badge -->
    <div style="margin-bottom: var(--space-md);">
        {% if chore.frequency == 'unlimited' %}
        <span class="frequency-badge" style="display: inline-flex; align-items: center; gap: 0.25rem;">
            <span>â™¾ï¸</span> <span>Unlimited</span>
        </span>
        {% elif chore.frequency == 'daily' %}
        <span class="frequency-badge" style="display: inline-flex; align-items: center; gap: 0.25rem;">
            <span>ğŸ“…</span> <span>Daily</span>
        </span>
        {% elif chore.frequency == 'weekly' %}
        <span class="frequency-badge" style="display: inline-flex; align-items: center; gap: 0.25rem;">
            <span>ğŸ“†</span> <span>Weekly</span>
        </span>
        {% elif chore.frequency == 'monthly' %}
        <span class="frequency-badge" style="display: inline-flex; align-items: center; gap: 0.25rem;">
            <span>ğŸ—“ï¸</span> <span>Monthly</span>
        </span>
        {% elif chore.frequency == 'one_time' %}
        <span class="frequency-badge" style="display: inline-flex; align-items: center; gap: 0.25rem;">
            <span>ğŸ”’</span> <span>One Time</span>
        </span>
        {% endif %}
    </div>

    <!-- Action Button -->
    <div style="margin-top: auto;">
        <button type="button" class="btn-primary view-chore-btn w-100" 
            data-chore-id="{{ chore.id }}"
            data-chore-name="{{ chore.name }}" 
            data-chore-description="{{ chore.description or '' }}"
            data-chore-tags="{{ chore.tags or '' }}" 
            data-chore-coin="{{ chore.coin_value }}"
            data-chore-point="{{ chore.point_value }}" 
            data-chore-frequency="{{ chore.frequency }}"
            data-chore-active="{{ 'true' if chore.is_active else 'false' }}"
            style="display: flex; align-items: center; justify-content: center; gap: 0.375rem;">
            <span>ğŸ‘ï¸</span>
            <span>View Details</span>
        </button>
        <form id="delete-form-{{ chore.id }}" method="POST"
            action="{{ url_for('parent.delete_chore', chore_id=chore.id) }}" style="display: none;"></form>
    </div>
</div>

<!-- Chore Details Modal -->
<div id="choreDetailsModal-{{ chore.id }}" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>{{ chore.name }}</h3>
            <span class="close" onclick="toggleModal('choreDetailsModal-{{ chore.id }}')">&times;</span>
        </div>
        <div class="modal-body">
            <!-- Status -->
            <div style="margin-bottom: var(--space-lg);">
                <form method="POST" action="{{ url_for('parent.toggle_chore', chore_id=chore.id) }}" style="display: inline;">
                    <button type="submit"
                        class="status-badge {% if not chore.is_active %}inactive{% else %}active{% endif %}"
                        style="cursor: pointer; border: none; font: inherit;"
                        title="Click to {% if chore.is_active %}hide{% else %}show{% endif %}">
                        {% if not chore.is_active %}ğŸ‘ï¸ Hidden{% else %}âœ“ Active{% endif %}
                    </button>
                </form>
            </div>

            <!-- Tags -->
            {% if chore.tags %}
            <div style="margin-bottom: var(--space-lg);">
                <label style="display: block; margin-bottom: var(--space-xs); font-weight: 700; text-transform: uppercase; font-size: 0.75rem; color: var(--text-secondary);">Tags</label>
                <div style="display: flex; gap: 0.375rem; flex-wrap: wrap;">
                    {% for tag in chore.tags.split(',') %}
                    <span class="tag-badge"
                        style="background: var(--accent-primary); color: white; padding: 0.25rem 0.625rem; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; border: 0.125rem solid var(--accent-dark); box-shadow: 0.125rem 0.125rem 0 var(--accent-dark);">
                        #{{ tag.strip() }}
                    </span>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            <!-- Description -->
            {% if chore.description %}
            <div style="margin-bottom: var(--space-lg);">
                <label style="display: block; margin-bottom: var(--space-xs); font-weight: 700; text-transform: uppercase; font-size: 0.75rem; color: var(--text-secondary);">Description</label>
                <p style="margin: 0; color: var(--text-primary); line-height: 1.6;">{{ chore.description }}</p>
            </div>
            {% endif %}

            <!-- Rewards -->
            <div style="margin-bottom: var(--space-lg);">
                <label style="display: block; margin-bottom: var(--space-sm); font-weight: 700; text-transform: uppercase; font-size: 0.75rem; color: var(--text-secondary);">Rewards</label>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-md);">
                    <div style="display: flex; align-items: center; gap: var(--space-sm); padding: var(--space-md); background: var(--bg-light); border: var(--border-sm) solid var(--accent-dark); box-shadow: var(--shadow-sm) var(--shadow-sm) 0 var(--accent-dark);">
                        <span style="font-size: 1.5rem;">ğŸ’°</span>
                        <div>
                            <div style="font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; font-weight: 700;">Coins</div>
                            <div style="font-size: 1.5rem; font-weight: 700; color: var(--accent-primary);">{{ chore.coin_value }}</div>
                        </div>
                    </div>
                    <div style="display: flex; align-items: center; gap: var(--space-sm); padding: var(--space-md); background: var(--bg-light); border: var(--border-sm) solid var(--accent-dark); box-shadow: var(--shadow-sm) var(--shadow-sm) 0 var(--accent-dark);">
                        <span style="font-size: 1.5rem;">â­</span>
                        <div>
                            <div style="font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; font-weight: 700;">Points</div>
                            <div style="font-size: 1.5rem; font-weight: 700; color: var(--accent-primary);">{{ chore.point_value }}</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Frequency -->
            <div style="margin-bottom: var(--space-lg);">
                <label style="display: block; margin-bottom: var(--space-xs); font-weight: 700; text-transform: uppercase; font-size: 0.75rem; color: var(--text-secondary);">Frequency</label>
                {% if chore.frequency == 'unlimited' %}
                <span class="frequency-badge" style="display: inline-flex; align-items: center; gap: 0.375rem; font-size: 1rem;">
                    <span>â™¾ï¸</span> <span>Unlimited</span>
                </span>
                {% elif chore.frequency == 'daily' %}
                <span class="frequency-badge" style="display: inline-flex; align-items: center; gap: 0.375rem; font-size: 1rem;">
                    <span>ğŸ“…</span> <span>Daily (once per day)</span>
                </span>
                {% elif chore.frequency == 'weekly' %}
                <span class="frequency-badge" style="display: inline-flex; align-items: center; gap: 0.375rem; font-size: 1rem;">
                    <span>ğŸ“†</span> <span>Weekly (once per week)</span>
                </span>
                {% elif chore.frequency == 'monthly' %}
                <span class="frequency-badge" style="display: inline-flex; align-items: center; gap: 0.375rem; font-size: 1rem;">
                    <span>ğŸ—“ï¸</span> <span>Monthly (once per month)</span>
                </span>
                {% elif chore.frequency == 'one_time' %}
                <span class="frequency-badge" style="display: inline-flex; align-items: center; gap: 0.375rem; font-size: 1rem;">
                    <span>ğŸ”’</span> <span>One Time Only</span>
                </span>
                {% endif %}
            </div>
        </div>
        
        <div class="modal-footer" style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-sm);">
            <button type="button" class="btn-primary edit-chore-btn" 
                data-chore-id="{{ chore.id }}"
                data-chore-name="{{ chore.name }}" 
                data-chore-description="{{ chore.description or '' }}"
                data-chore-tags="{{ chore.tags or '' }}" 
                data-chore-coin="{{ chore.coin_value }}"
                data-chore-point="{{ chore.point_value }}" 
                data-chore-frequency="{{ chore.frequency }}"
                data-chore-active="{{ 'true' if chore.is_active else 'false' }}"
                onclick="toggleModal('choreDetailsModal-{{ chore.id }}')">
                âœï¸ Edit
            </button>
            <button type="button" class="btn-danger delete-chore-btn" 
                data-chore-id="{{ chore.id }}"
                data-chore-name="{{ chore.name }}"
                onclick="toggleModal('choreDetailsModal-{{ chore.id }}')">
                ğŸ—‘ï¸ Delete
            </button>
        </div>
    </div>
</div>


