<div class="card chore-item" data-chore-tags="{{ chore.tags or '' }}">
    <div class="d-flex justify-content-between">
        <!-- Tags -->
        {% if chore.tags %}
        <div class="tag-badge-container">
            {% set all_tags = chore.tags.split(',') %}
            {% for tag in all_tags[:4] %}
            <span class="tag-badge">
                #{{ tag.strip() }}
            </span>
            {% endfor %}
        </div>
        {% endif %}

        <!-- Header with name and status -->
        <div class="card-header-row">
            <form method="POST" action="{{ url_for('parent.toggle_chore', chore_id=chore.id) }}" class="form-flex-shrink">
                <button type="submit" class="status-badge {% if not chore.is_active %}inactive{% else %}active{% endif %}"
                    title="Click to {% if chore.is_active %}hide{% else %}show{% endif %}">
                    {% if not chore.is_active %}üëÅÔ∏è Hidden{% else %}‚úì Active{% endif %}
                </button>
            </form>
        </div>
    </div>

    <div class="card-title-center">
        <h3 class="fs-3 fw-bolder">
            {{ chore.name }}
        </h3>
    </div>

    <!-- Action Button -->
    <div class="card-actions">
        <button type="button" class="btn-primary view-chore-btn card-action-button w-100" data-chore-id="{{ chore.id }}"
            data-chore-name="{{ chore.name }}" data-chore-description="{{ chore.description or '' }}"
            data-chore-tags="{{ chore.tags or '' }}" data-chore-coin="{{ chore.coin_value }}"
            data-chore-point="{{ chore.point_value }}" data-chore-frequency="{{ chore.frequency }}"
            data-chore-active="{{ 'true' if chore.is_active else 'false' }}">
            <span>View Details</span>
        </button>
        <form id="delete-form-{{ chore.id }}" method="POST"
            action="{{ url_for('parent.delete_chore', chore_id=chore.id) }}" class="hidden-form"></form>
    </div>
</div>

<!-- Chore Details Modal -->
<div id="choreDetailsModal-{{ chore.id }}" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>{{ chore.name }}</h3>
            <span class="close" onclick="toggleModal('choreDetailsModal-{{ chore.id }}')">&times;</span>
        </div>
        <div class="modal-body">
            <!-- Status -->
            <div class="modal-section">
                <form method="POST" action="{{ url_for('parent.toggle_chore', chore_id=chore.id) }}" class="inline-form">
                    <button type="submit" class="status-badge {% if not chore.is_active %}inactive{% else %}active{% endif %}"
                        title="Click to {% if chore.is_active %}hide{% else %}show{% endif %}">
                        {% if not chore.is_active %}üëÅÔ∏è Hidden{% else %}‚úì Active{% endif %}
                    </button>
                </form>
            </div>

            <!-- Tags -->
            {% if chore.tags %}
            <div class="modal-section">
                <label class="modal-label">Tags</label>
                <div class="tags-container">
                    {% for tag in chore.tags.split(',') %}
                    <span class="tag-badge">
                        #{{ tag.strip() }}
                    </span>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            <!-- Description -->
            {% if chore.description %}
            <div class="modal-section">
                <label class="modal-label">Description</label>
                <p class="modal-text">{{ chore.description }}</p>
            </div>
            {% endif %}

            <!-- Rewards -->
            <div class="modal-section">
                <label class="modal-label-lg">Rewards</label>
                <div class="reward-grid">
                    <div class="reward-box">
                        <span class="reward-icon">üí∞</span>
                        <div>
                            <div class="reward-label">Coins</div>
                            <div class="reward-value">{{ chore.coin_value }}</div>
                        </div>
                    </div>
                    <div class="reward-box">
                        <span class="reward-icon">‚≠ê</span>
                        <div>
                            <div class="reward-label">Points</div>
                            <div class="reward-value">{{ chore.point_value }}</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Frequency -->
            <div class="modal-section">
                <label class="modal-label">Frequency</label>
                {% if chore.frequency == 'unlimited' %}
                <span class="frequency-badge">
                    <span>‚ôæÔ∏è</span> <span>Unlimited</span>
                </span>
                {% elif chore.frequency == 'daily' %}
                <span class="frequency-badge">
                    <span>üìÖ</span> <span>Daily (once per day)</span>
                </span>
                {% elif chore.frequency == 'weekly' %}
                <span class="frequency-badge">
                    <span>üìÜ</span> <span>Weekly (once per week)</span>
                </span>
                {% elif chore.frequency == 'monthly' %}
                <span class="frequency-badge">
                    <span>üóìÔ∏è</span> <span>Monthly (once per month)</span>
                </span>
                {% elif chore.frequency == 'one_time' %}
                <span class="frequency-badge">
                    <span>üîí</span> <span>One Time Only</span>
                </span>
                {% endif %}
            </div>
        </div>

        <div class="modal-footer d-grid" style="grid-template-columns: 1fr 1fr; gap: var(--space-sm);">
            <button type="button" class="btn-primary edit-chore-btn" data-chore-id="{{ chore.id }}"
                data-chore-name="{{ chore.name }}" data-chore-description="{{ chore.description or '' }}"
                data-chore-tags="{{ chore.tags or '' }}" data-chore-coin="{{ chore.coin_value }}"
                data-chore-point="{{ chore.point_value }}" data-chore-frequency="{{ chore.frequency }}"
                data-chore-active="{{ 'true' if chore.is_active else 'false' }}"
                onclick="toggleModal('choreDetailsModal-{{ chore.id }}')">
                ‚úèÔ∏è Edit
            </button>
            <button type="button" class="btn-danger delete-chore-btn" data-chore-id="{{ chore.id }}"
                data-chore-name="{{ chore.name }}" onclick="toggleModal('choreDetailsModal-{{ chore.id }}')">
                üóëÔ∏è Delete
            </button>
        </div>
    </div>
</div>