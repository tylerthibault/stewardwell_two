<div class="dashboard-grid">
        <div class="dashboard-card full-width">
            <div class="card-header">
                <h2>All Completed Chores</h2>
                <div class="d-flex gap-2 flex-wrap">
                    <select id="choreKidFilter" class="form-control" style="width: auto;">
                        <option value="all">All Kids</option>
                        {% for kid in kids %}
                        <option value="{{ kid.id }}">{{ kid.name }}</option>
                        {% endfor %}
                    </select>
                    <select id="choreChoreFilter" class="form-control" style="width: auto;">
                        <option value="all">All Chores</option>
                        {% for chore in chores %}
                        <option value="{{ chore.id }}">{{ chore.name }}</option>
                        {% endfor %}
                    </select>
                    <select id="choreStatusFilter" class="form-control" style="width: auto;">
                        <option value="all">All Status</option>
                        <option value="confirmed">Confirmed</option>
                        <option value="rejected">Rejected</option>
                    </select>
                </div>
            </div>
            <div class="card-body">
                {% if assignments %}
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Completed</th>
                                <th>Kid</th>
                                <th>Chore</th>
                                <th>Reward</th>
                                <th>Status</th>
                                <th>Reviewed</th>
                            </tr>
                        </thead>
                        <tbody id="choreTableBody">
                            {% for assignment in assignments %}
                            <tr class="chore-row" 
                                data-kid-id="{{ assignment.kid_id }}" 
                                data-chore-id="{{ assignment.chore_id }}"
                                data-status="{{ assignment.status }}">
                                <td>
                                    {% if assignment.completed_at %}
                                    {{ assignment.completed_at.strftime('%b %d, %Y %I:%M %p') }}
                                    {% else %}
                                    <span class="text-muted">‚Äî</span>
                                    {% endif %}
                                </td>
                                <td>
                                    <strong>{{ assignment.kid.name }}</strong>
                                </td>
                                <td>
                                    <div>
                                        <strong>{{ assignment.chore.name }}</strong>
                                    </div>
                                </td>
                                <td>
                                    <div class="d-flex gap-2">
                                        {% if assignment.coin_awarded %}
                                        <span class="coin-badge">
                                            üí∞ {{ assignment.coin_awarded }}
                                        </span>
                                        {% endif %}
                                        {% if assignment.chore.point_value %}
                                        <span class="point-badge">
                                            ‚≠ê {{ assignment.chore.point_value }}
                                        </span>
                                        {% endif %}
                                    </div>
                                </td>
                                <td>
                                    {% if assignment.status == 'confirmed' %}
                                    <span class="status-badge active">‚úÖ Confirmed</span>
                                    {% elif assignment.status == 'rejected' %}
                                    <span class="status-badge" style="background: var(--danger-primary);">‚ùå Rejected</span>
                                    {% endif %}
                                </td>
                                <td>
                                    {% if assignment.confirmed_by_parent_id %}
                                    {{ assignment.created_at.strftime('%b %d, %Y') }}
                                    {% else %}
                                    <span class="text-muted">‚Äî</span>
                                    {% endif %}
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% else %}
                <div class="empty-state text-center">
                    <p style="font-size: 1.1rem; color: var(--text-muted, #666);">No completed chores yet</p>
                    <p>Chores will appear here when kids complete them and you review them</p>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Summary Stats -->
        {% if assignments %}
        <div class="dashboard-card">
            <div class="card-header">
                <h3>Summary</h3>
            </div>
            <div class="card-body">
                <div class="stat-grid">
                    <div class="stat-item">
                        <div class="stat-label">Total Completed</div>
                        <div class="stat-value">{{ assignments|length }}</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Confirmed</div>
                        <div class="stat-value">{{ assignments|selectattr('status', 'equalto', 'confirmed')|list|length }}</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Rejected</div>
                        <div class="stat-value">{{ assignments|selectattr('status', 'equalto', 'rejected')|list|length }}</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Total Coins Awarded</div>
                        <div class="stat-value">üí∞ {{ assignments|selectattr('coin_awarded')|sum(attribute='coin_awarded') or 0 }}</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Top Performers -->
        <div class="dashboard-card">
            <div class="card-header">
                <h3>Top Performers</h3>
            </div>
            <div class="card-body">
                {% set kid_stats = {} %}
                {% for assignment in assignments if assignment.status == 'confirmed' %}
                    {% set _ = kid_stats.update({assignment.kid.name: kid_stats.get(assignment.kid.name, 0) + 1}) %}
                {% endfor %}
                {% if kid_stats %}
                <div class="stat-list">
                    {% for kid_name, count in kid_stats.items()|sort(attribute='1', reverse=True) %}
                    <div class="stat-item-row">
                        <span class="stat-label">{{ kid_name }}</span>
                        <span class="stat-value">{{ count }} chores</span>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <p class="text-muted">No confirmed chores yet</p>
                {% endif %}
            </div>
        </div>
        {% endif %}
    </div>
</div>
